%T Test beforebuffer and afterbuffer

\usemodule[filter]

% pandoc now translates numbered list to `enumerate` environment
\defineitemgroup[enumerate]
\setupenumerate[each][fit][itemalign=left,distance=.5em]

\defineexternalfilter 
  [markdown]
  [filter={pandoc -w context -o \externalfilteroutputfile },
   bufferbefore={before-1,before-2},
   bufferafter=after]

\startbuffer[before-1]
1. Before first
\stopbuffer

\startbuffer[before-2]
1. Before second
\stopbuffer

\startbuffer[after]
1. After
\stopbuffer

\starttext
\startmarkdown
1. Main
\stopmarkdown
\stoptext
\endinput

